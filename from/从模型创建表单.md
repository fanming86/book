# 1-从模型创建表单

----

如果您正在构建一个数据库驱动的应用程序，那么您很有可能会用到与Django模型密切相关的表单。例如，您可能有一个 BlogComment 模型，并且您想创建一个让用户提交评论的表单。在这种情况下，在表单中定义字段类型是多余的，因为您已经在模型中定义了字段。

因此，Django 提供了一个辅助类让你可以从一个 Django 模型创建一个 Form 类。
来自Django官网 <https://docs.djangoproject.com/zh-hans/2.2/topics/forms/modelforms/>

### 从模型创建表单步骤
>从django.forms导入ModelForm  
编写一个自己的新类（即构建表单的类），继承ModelForm  
在新类里，设置元类Meta  
在Meta中，设置model属性为你要关联的ORM模型  
在Meta中，设置fields属性为你要在表单中使用的字段列表  
fields列表里的值，是ORM模型model中的字段名  

#### `models.py`
```python
from django.db import models

# Create your models here.
from django.forms import ModelForm

class addModel(models.Model):
    name = models.CharField(max_length=100)
    age = models.IntegerField()
    email = models.EmailField()
#以上为模型的内容

class AddForm(ModelForm):
    class Meta:
        model = addModel
        #fields = ['name', 'email']
        fields = '__all__'  #将 fields 属性设置为特殊值 '__all__' 以表明需要使用模型中的所有字段
```
>**字段会按模型中定义的顺序在表单中出现， ManyToManyField 会排在最后  
另外，Django有个规则：如果您在模型字段中定义了 editable=False ， *任何*使用 ModelForm 给该模型创建的表单都不会包含这个字段。**


#### `views.py`

```python

from .models import  AddForm

def index(request):
    if request.method == 'POST': 
        form = AddForm(request.POST)  
        if form.is_valid():  
            print(form.cleaned_data)   
            name = form.cleaned_data['name']   
            form.save()     #可以直接调用save方法，将数据保存到数据库
            return HttpResponse('ok')

    else:  
        form = AddForm()
    return render(request, 'form.html', {'form': form})
```

##### 此例中的urls.py index.html等此章未列出的文件内容，均与上一章节中相同
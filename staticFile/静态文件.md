# 静态文件

---

#### 静态文件的一般安放位置有两种:  
##### 1.一种就是在每个app里面新建一个static文件夹  
将静态文件放到里面,在加载静态文件时,比如要在模板中用到静态文件,django会自动在每个app里面搜索static文件夹(所以,不要把文件夹的名字写错哦, 否则django就找不到你的文件夹了)  

##### 2.另一种,就是在所有的app文件外面,建立一个公共的文件夹  
 因为有些静态文件不是某个app独有的,那么就可以把它放到一个公共文件夹里面,方便管理(注意,建立一个公共的静态文件的文件夹只是一种易于管理的做法,但是不是必须的,app是可以跨app应用静态文件的,因为最后所有的静态文件都会在STATIC_ROOT里面存在)   
那现在的问题是如何让django知道你把一些静态文件放到app以外的公共文件夹中呢,那就需要配置STATICFILES_DIRS了

```python
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, 'static'),
)
```

STATICFILES_DIRS告诉django,首先到STATICFILES_DIRS里面寻找静态文件,其次再到各个app的static文件夹里面找(注意, django查找静态文件是惰性查找,查找到第一个,就停止查找了)

#### 顺便说一嘴
Django配置文件settings.py里的DEBUG变量就是主要的区别， DEBUG=True，说明是在开发环境（调试模式）下，DEBUG=False反之是在正式部署环境下使用。两者有很大的区别，比如缓存，出错信息的方式等等，还有今天说的静态文件的处理方式上。开发环境下静态文件都是通过Django自带的web服务器来处理的（这样会更方面）。 如果把DEBUG设置成False，那么Django自带的web服务器自然不处理静态文件了，所以我们使用web服务器来处理静态文件，例如 httpd，nginx等

#### 三个变量

```python
STATIC_URL = '/static/'     #使地址能找到此文件夹
STATICFILES_DIRS = (os.path.join(BASE_DIR, 'static'),)      #静态文件的公共文件夹
STATIC_ROOT = 'static/'     #执行collectstatic 命令之后，静态文件移动至此目录
```


## 1、在应用下存放静态文件
### 目录结构
```
    ├─mysite
    │  └─__pycache__
    ├─polls
    │  ├─migrations
    │  │  └─__pycache__
    │  ├─static
    │  │  └─image
    │  └─__pycache__
    ├─templates
    在app目录下创建static目录，static目录下创建image目录，目录中包含一张图片 a.png
```

### setting.py
在setting 文件中配置static_url 指定页面所要查找的路径
```
STATIC_URL='/static/'
```

### index.html
页面中加载static  
```html
load static    <!--两边带上大括号，百分号，页面渲染原因，无法直接书写-->
<img src="{%nbsp; static 'image/a.png' %}">      <!--插入图片-->
<link href="{% static 'css/index.css' %}" rel="stylesheet">   <!--引入css-->
<script src="{% static 'js/modernizr.js' %}"></script>      <!--引入图片-->
```


## 2、在公共目录中存放静态文件
### 目录结构
```
    ├─mysite
    │  └─__pycache__
    ├─polls
    │  ├─migrations
    │  │  └─__pycache__
    │  └─__pycache__
    ├─static
    │  └─image
    ├─templates
    静态目录放在项目根目录，创建static/image ，包含图片a.png
```

### setting.py
指定静态文件存放的目录
```python
STATIC_URL='/static/'
STATICFILES_DIRS=[(os.path.join(BASE_DIR,'static')),]
```

### index.html
html文件中不用改变
```html
load static    <!--两边带上大括号，百分号，页面渲染原因，无法直接书写-->
<img src="{ %  st nbsp; atic 'image/a.png' % }">      <!--插入图片-->
<link href="{% static 'css/index.css' %}" rel="stylesheet">   <!--引入css-->
<script src="{% static 'js/modernizr.js' %}"></script>      <!--引入图片-->
```

### css中引入背景图片
直接写绝对路径
```css
background: url('/static/images/banner_top.jpg') 
```
